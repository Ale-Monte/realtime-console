# Realtime AI Conversation

A realtime, browser-based voice conversation app powered by **WebRTC** and a **Realtime AI model**.  
Users can speak into their microphone, stream audio to the model, and receive live audio + event feedback directly in the browser.

---

## Table of Contents

- [Features](#features)
- [Project Structure](#project-structure)
- [How It Works](#how-it-works)
- [Getting Started](#getting-started)
  - [Prerequisites](#prerequisites)
  - [Installation](#installation)
  - [Configuration](#configuration)
  - [Development](#development)
  - [Production](#production)
- [Scripts](#scripts)
- [Tech Stack](#tech-stack)
- [Demo (Conceptual)](#demo-conceptual)
- [Security](#security)

---

## Features

- 🎤 **Microphone streaming** – send audio from the browser to the AI model.
- 🔊 **Realtime playback** – hear the AI model’s audio streamed back to your browser.
- 📡 **WebRTC peer connection** – low-latency communication with the model.
- 📑 **Structured event logging** – see server and client events in the UI.
- 🔧 **Controls** – connect, disconnect, and mute/unmute mic at any time.
- 🔐 **Secure authentication** – uses short-lived ephemeral API keys generated by the server.

---

## Project Structure

```
client/
├── components/         # UI components
│   ├── AudioSink.jsx   # Plays remote audio
│   ├── Controls.jsx    # Connection + mic controls
│   └── EventLog.jsx    # Displays event log & status
├── hooks/
│   └── useRealtime.jsx # Core WebRTC + state logic
├── utils/
│   └── logger.js
├── App.jsx             # Main React app
├── index.html
├── main.jsx
├── styles.css
server.js               # Express server (ephemeral token endpoint)
config.js               # Model + API base URL config
vite.config.js          # Vite build config
```

---

## How It Works

1. **Frontend (React + Vite)**

   - Renders UI (`App.jsx`) with **Controls**, **AudioSink**, and **EventLog**.
   - Uses the custom hook **useRealtime** to manage:
     - WebRTC peer connection
     - Mic capture + mute/unmute
     - Remote audio playback
     - Data channel event logging

2. **Backend (Node.js server)**

   - Provides a `/session` endpoint.
   - Generates ephemeral API keys from your AI provider (**valid ~60s**).
   - Ensures API keys are **never exposed directly** in the client.

3. **Realtime AI Conversation**
   - The browser makes an **SDP offer → sent to the API** with an ephemeral key.
   - The API responds with an **SDP answer**.
   - Audio + events flow between **browser ↔ AI model over WebRTC**.

---

## Getting Started

### Prerequisites

- **Node.js** (>= 18.x recommended)
- **npm** or **yarn**

### Installation

```bash
# Clone the repository
git clone https://github.com/Ale-Monte/realtime-console.git
cd realtime-console

# Install dependencies
npm install
```

### Configuration

Create a **.env** file in the root:

```bash
API_KEY=your_api_key_here
BASE_URL=https://api.example.com/realtime  # Replace with provider’s Realtime endpoint
MODEL=your-model-id
```

### Development

Run both server and client:

```bash
# Start dev server
npm run dev
```

Vite will start the client (default: **http://localhost:5173**)  
Server will handle **/session** requests for ephemeral tokens.

### Production

```bash
npm run build   # Build frontend
npm run preview # Preview production build
```

---

## Scripts

- `npm run dev` – **Start Vite + backend in dev mode**
- `npm run build` – **Build client for production**
- `npm run preview` – **Serve built app locally**

---

## Tech Stack

- **Frontend:** React, Vite
- **Backend:** Node.js, Express
- **Web APIs:** WebRTC, MediaDevices API, DataChannel API
- **Other:** Ephemeral API keys for secure client → server → model communication

---

## Demo (Conceptual)

1. **Click Connect** → starts session with ephemeral token.
2. **Speak into your mic** → audio streams to AI model.
3. **Hear AI’s voice back** → streamed through `<AudioSink>`.
4. **Watch structured logs** update in **EventLog**.
5. **Use controls** to mute/unmute or disconnect.

---

## Security

- **Ephemeral keys** last ~60 seconds.
- **Long-term API keys** are never exposed to the browser.
- **Server acts** as a secure token proxy.

---
